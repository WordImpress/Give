function give_load_gateway(e,i){var t=jQuery(e).find('[id*="give-payment-mode-select"] .give-loading-text'),a=jQuery(e).find('[id*="give-amount"]').val(),o=jQuery(e).find('input[name="give-form-id"]').val();t.fadeIn();var n=jQuery(e).data();1!=n["blockUI.isBlocked"]&&jQuery(e).find('[id*="give-purchase-form-wrap"]').block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),jQuery.post(give_scripts.ajaxurl+"?payment-mode="+i,{action:"give_load_gateway",give_total:a,give_form_id:o,give_payment_mode:i},function(i){jQuery(e).unblock(),jQuery(e).find('[id*="give-purchase-form-wrap-form-id"]').html(i),jQuery(".give-no-js").hide(),jQuery(e).find('[id*="give-payment-mode-wrap"] .give-loading-text').fadeOut(),setup_give_tooltips(),jQuery(document).trigger("give_gateway_loaded",[i,jQuery(e).attr("id")])})}function setup_give_tooltips(){jQuery('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},style:{classes:"qtip-rounded qtip-tipsy"},position:{my:"bottom center",at:"top center"}})}var give_scripts,give_global_vars;jQuery(document).ready(function(e){setup_give_tooltips(),e(".give-loading-text").hide(),e("body").on("click",".give-checkout-register-login",function(i){var t=e(this),a={action:t.data("action")},o=e(this).parents("form"),n=e(o).find("#give-login-account-wrap .give-loading-text");return n.show(),e.post(give_scripts.ajaxurl,a,function(i){e(o).find("#give-checkout-login-register").html("").html(i)}).done(function(){setup_form_loading_images(),n.hide()}),!1}),e(document).on("click","#give-login-fields input[type=submit]",function(i){i.preventDefault();var t=e(this).val(),a=e(this).parents("form");e(this).val(give_global_vars.purchase_loading),a.find("#give-login-fields .give-loading-animation").fadeIn();var o={action:"give_process_checkout_login",give_ajax:1,give_user_login:a.find("#give-user-login").val(),give_user_pass:a.find("#give-user-pass").val()};e.post(give_global_vars.ajaxurl,o,function(i){"success"==e.trim(i)?(a.find(".give-errors").remove(),give_load_gateway(a,a.find(".give-gateway-option-selected input").val())):(a.find("#give-login-fields input[type=submit]").val(t),a.find(".give-loading-animation").fadeOut(),a.find(".give-errors").remove(),a.find("#give-user-login-submit").before(i))})}),e('select[id*="give-gateway"], input[class*="give-gateway"]').on("change",function(i){i.preventDefault();var t=e(this).val();return"0"==t?(console.log("There was a problem loading the selected gateway"),!1):(give_load_gateway(e(this).parents("form"),t),!1)}),e("body").on("click touchend","#give-purchase-button",function(i){var t=e(this).parents("form.give-form"),a=t.find("#give-purchase-submit .give-loading-animation");a.fadeIn();var o=t.get(0);if("function"==typeof o.checkValidity&&o.checkValidity()===!1)return void a.fadeOut();i.preventDefault();var n=e(this).val();e(this).val(give_global_vars.purchase_loading),e.post(give_global_vars.ajaxurl,t.serialize()+"&action=give_process_checkout&give_ajax=true",function(i){"success"==e.trim(i)?(t.find(".give-errors").remove(),e(o).submit()):(t.find("#give-purchase-button-form-id-"+form_id).val(n),a.fadeOut(),t.find(".give-errors").remove(),t.find("#give-purchase-submit-form-id-"+form_id).before(i))})})});